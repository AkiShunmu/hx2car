- ```java
  List<PersonalCell> cellist = personalCellManage.getPersonalResidueNumList(mobile);
  if (cellist != null && cellist.size() > 0){
      for (PersonalCell personalCell : cellist) {
          if (personalCell.getResidueNum() > 0){
              vo.setTitle("title");
              break;
          }
      }
  }
  ```

  - 从接口方法发回的Collection不能为null，必须返回一个空的Collection
  - 判断Collection是否是空时使用CollectionUtils.isEmpty(Collection)

  - Manage继承`BaseJpaManageImpl`

  - ```java
    public interface ExamineOrderRepo extends JpaRepository<ExamineOrderDo,Long> {
        ExamineOrderDo findByIdAndFlag(Long id,Integer flag);
    }
    // 修改后
    public interface ExamineOrderRepo extends JpaRepository<ExamineOrderDo,Long> {
        Optional<ExamineOrderDo> findByIdAndFlag(Long id,Integer flag);
    }
    
    public ManagerDo findById(Long id) {
        Optional<ManagerDo> optional = managerRepo.findById(id);
        if (optional == null){
            return null;
        }
        return optional.get();
    }
    // 修改后
    public ManagerDo findById(Long id) {
        return managerRepo.findById(id).orElse(null);
    }
    ```

    - 数据库查询返回单个对象时尽量返回`Optional`对象

- Dubbo接口不能返回Optional，Optional没有实现序列化接口

- ```java
  for (CommissionBalanceDo commission : balances) {
      insertIncome(commission, bizType, commission.getMoney(), bizId);
      bizPrice-=commission.getMoney();
      costPrice+=commission.getMoney();
      commission.setModifyTime(new Date());
      commission.setMoney(0f);
      // 保存到数据库
      commissionBalanceRepo.save(commission);
  }
  // 修改后
  for (CommissionBalanceDo commission : balances) {
      insertIncome(commission, bizType, commission.getMoney(), bizId);
      bizPrice-=commission.getMoney();
      costPrice+=commission.getMoney();
      commission.setModifyTime(new Date());
      commission.setMoney(0f);
  }
  // 保存多条数据到数据库
  commissionBalanceRepo.saveAll(commission);
  ```

  - 存储多条数据时批量插入，数据库操作时，连接操作是最耗时的

- ```java
  if (list==null||list.size()<1){
      if(CacheUtil.get(BIDDINGCAR_RRFRESH + areaCode) !=null){
          BiddingCarDo biddingCar = new BiddingCarDo();
          biddingCar.setProviceCode(areaCode.substring(0, 2));
          list = cache.get(BIDDINGCAR_CODE + areaCode).getValue();
      }
  }
  // 修改后
  boolean result = CollectionUtils.isEmpty(list) && CacheUtil.get(BIDDINGCAR_RRFRESH + areaCode) !=null;
  if (result) {
      BiddingCarDo biddingCar = new BiddingCarDo();
      biddingCar.setProviceCode(areaCode.substring(0, 2));
      list = cache.get(BIDDINGCAR_CODE + areaCode).getValue();
  }
  ```
  - 多个if条件语句嵌套式如果只有判断没有其他逻辑处理，将多个if语句的条件合并
  - 如果条件过长需要将条件提取出来作为一个boolean类型

- ```java
  public List<AliqinCarDetailPoolDo> findByState(Integer state) {
      if (state == null){
          return null;
      }
      return aliqinCarDetailPoolRepo.findByFlagAndState(FLAG,state);
  }
  // 修改后
  public List<AliqinCarDetailPoolDo> findByState(int state) {
      return aliqinCarDetailPoolRepo.findByFlagAndState(FLAG,state);
  }
  ```
  - 对于不能为空的常量，使用基本数据类型，去除非空判断

- ```java
  if (aliqinPhones != null && aliqinPhones.size() > 0) {
      return null;
  } else {
      log.info("170池子已经用完。");
  }
  // 修改后
  if (aliqinPhones != null && aliqinPhones.size() > 0) {
      return null;
  }
  log.info("170池子已经用完。");
  ```
  - 不是每一个if都需要有else的

- ```java
  public Boolean findByLoginnameIsTureOrFalse(String loginName) {
      List<BusinessInforDo> list = businessInforRepo.findByLoginname(loginName);
      return list == null ? false : true;
  }
  // 修改后
  public Boolean findByLoginnameIsTureOrFalse(String loginName) {
      List<BusinessInforDo> list = businessInforRepo.findByLoginname(loginName);
      return list.isEmpty();
  }
  ```
  - JPA查询出的列表不可能为空，即使数据为空也只会返回一个空的list

- jpa保存数据时肯定会返回保存成功后的对象，除非报错