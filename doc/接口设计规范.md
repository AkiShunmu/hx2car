## 接口设计

- 功能的定义
  - 
- 接口依赖
    - 对于用于跟数据直接操作的的manage，应该直接继承BaseJpaManage
    - BaseJpaManage中封装了简单的数据库操作，当前只有一下操作，但是以后会继续进行扩展
        - saveOrUpdate：单个或者批量数据插入
        - count：计数
        - queryOne：单个数据查询
        - queryList：多个数据查询（排序未实现）
        - queryPage：分页查询，支持排序
        - queryFirst：获取第一条数据（未实现）
- 入参
    - 尽可能对参数进行包装，继承公共实体
    - 所有接口方法都可以通过一下方法来进行参数校验
    - 所有入参如果包装成实体必须以VO结尾
    - 参数校验
        - 统一使用hibernate的校验框架
        - 在类上加@Validated注解，接口方法参数前加@Valid注解即可
        - 所有使用注解的方法必须返回ResultHx
        - 使用方式
            - `@AssertFalse` 验证注解的元素值是false
            - `@AssertTrue` 验证注解的元素值是true
            - `@DecimalMax(value=x) `验证注解的元素值小于等于@DecimalMax指定的value值
            - `@DecimalMin(value=x) `验证注解的元素值小于等于@DecimalMin指定的value值
            - `@Digits(integer=整数位数, fraction=小数位数) `验证注解的元素值的整数位数和小数位数上限
            - `@Future` 验证注解的元素值(日期类型)比当前时间晚
            - `@Max(value=x) `验证注解的元素值小于等于@Max指定的value值
            - `@Min(value=x)` 验证注解的元素值大于等于@Min指定的value值
            - `@NotNull` 验证注解的元素值不是null
            - `@Null` 验证注解的元素值是null
            - `@Past` 验证注解的元素值(日期类型)比当前时间早
            - `@Pattern(regex=正则表达式, flag=)` 验证注解的元素值与指定的正则表达式匹配
            - `@Size(min=最小值, max=最大值)` 验证注解的元素值的在min和max(包含)指定区间之内，如字符长度、集合大小
            - `@Valid` 验证关联的对象，如账户对象里有一个订单对象，指定 验证订单对象
            - `@NotEmpty` 验证注解的元素值不为null且不为空(字符串长度不为0、集合大小不为0)
            - `@Range(min=最小值, max=最大值) `验证注解的元素值在最小值和最大值之间
            - `@NotBlank` 验证注解的元素值不为空(不为null、去除首位空格后长度为0)，不同于@NotEmpty，@NotBlank只应用于字符串且在比较时会去除字符串的空格
            - `@Length(min=下限, max=上限)` 验证注解的元素值长度在min和max区间内
            - `@Email` 验证注解的元素值是Email，也可以通过正则表达式和flag指定自定义的email格式
- 出参
    - 使用ResultHx进行包装
    - 所有返回实体必须以DTO结尾
- 异常
    - 如果异常不影响结果可以通过try-cache捕捉，否则直接通过方法抛出
    - 通过ServiceExceptionAspect进行全局异常捕捉

## 方法命名规范

- 查询
    - 单条数据：queryOne开头
    - 多条数据：queryList开头
    - 分页数据：queryPage开头
- 修改
    - 单条数据：updateOne开头
    - 多条数据：updateList开头
- 删除
    - 单条数据：deleteOne开头
    - 多条数据：deleteList开头
- 根据功能命名方法
    - 动词+名词
    - 例子
        - 发送短信：sendMsg
        - 现金扣除：deductMoneyAccount
        - 充值华币：rechargeMoneyCount
        - 发车：publishCar

## API

### 接口参数封装

- 分页
    - 分页参数统一使用PageVo包装
    - 分页结果统一使用PageData包装

####  接口路径命名

- /名词/.../名词/动词
    - 例子
        - 发布车辆：/car/create
        - 修改车辆信息：/car/update
        - 获取车辆信息：/car/find
        - 获取车辆列表：/cars/find
        - 分页获取车辆：/car/page
        - 单个下架车辆：/car/offshelf
        - 批量下架车辆：/cars/offshelf